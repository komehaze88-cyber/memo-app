# 機能案 / ロードマップ

このドキュメントは、現状のプロトタイプ実装を踏まえた「追加すると便利そうな機能案」のバックログです。
（優先度は暫定。実装コスト・事故りやすさ・体験改善の大きさで並べています）

## まず入れたい（体験に直結 / 低〜中コスト）

### 1) 検索・絞り込み
- ファイル名検索（インクリメンタル）
- 本文検索（Rust側でgrep相当 or 逐次読み取り）
- 一致箇所ハイライト / 次へ・前へ
- `Ctrl+P`的なクイックオープン（最近開いた順も）

### 2) 自動保存（方針の整理 + UI）
- デバウンス保存（例: 800〜1500ms）をオプション化
- 保存中インジケータ（ステータスバー、タイトルバー、サイドバーなど）
- トーストの頻度制御（連続保存でスパムにならないように）

### 3) 外部変更検知と衝突ハンドリング
- 他エディタで更新/削除/リネームされた場合に一覧更新
- 編集中ファイルが外部更新された場合の警告と選択肢
  - 上書き / 取り込み（再読み込み）/ 別名保存

### 4) アウトライン（見出しジャンプ）
- 現在のメモから見出し抽出してTOC表示
- クリックで該当位置へジャンプ

## 次に入れたい（中コストだが効く）

### 5.5) フォント設定（ユーザー指定フォントファイル）
- エディタ/UIのフォントをローカルフォントファイル（`.ttf/.otf/.woff/.woff2`）から選択して適用
- 取り込み（アプリ管理領域へコピー）→永続化→起動時自動適用
- 仕様案: `docs/SPEC_CUSTOM_FONTS.md`

### 5) サブフォルダ対応（ツリー）
- フォルダツリー表示（展開/折りたたみ）
- サブフォルダ作成
- 検索対象を「全フォルダ」/「現在フォルダ」に切替

### 6) 添付（画像/ファイル）
- 画像ドラッグ&ドロップ/貼り付けで保存（例: `assets/`）
- Markdownへのリンク/埋め込みを自動挿入
- 画像プレビュー・リネーム・不要ファイル検出（任意）

### 7) テンプレート + デイリーノート
- 新規作成時にテンプレ選択
- 日付ベースのファイル名（例: `2025-12-25.md`）
- 今日のノートへ即移動（存在しなければ作成）

## 余力があれば（価値は高いが設計が要る）

### 8) 履歴/復元
- 変更履歴（スナップショット or 差分）
- 誤削除/誤上書きからの復旧
- “最近閉じたメモ” から復帰

### 9) メタデータ（タグ/ピン/スマートリスト）
- YAMLフロントマターからタグ抽出
- タグフィルタ、ピン留め、スター
- スマートリスト（例: `#todo`を含む、最近更新、未整理）

### 10) エクスポート/連携
- HTML/PDF出力（エディタ表示そのまま or Markdownレンダリング）
- OS連携（ファイルを開く、フォルダで表示）
- 印刷

## 仕様・実装の差分（要整理）

- `docs/ARCHITECTURE.md` には「1秒デバウンスの自動保存」とありますが、現状は `Ctrl+S` と「メモ切替時のflush保存」が中心です（`src/hooks/useAutoSave.ts` の `useManualSave`）。
  - 方針を「常時自動保存」にするのか、「手動＋切替時保存」にするのかを決めて、ドキュメントと実装を揃える。
